(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[76],{5867:(_,p,a)=>{a.r(p),a.d(p,{remoteRoutes:()=>v});var d=a(4523),e=a(541),c=a(4151),r=a(349),l=a(7603);function u(o,m){if(1&o){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",2)(1,"button",3),e.\u0275\u0275listener("click",function(){const i=e.\u0275\u0275restoreView(t).$implicit,s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.navigateToRemote(i))}),e.\u0275\u0275element(2,"span",4),e.\u0275\u0275text(3),e.\u0275\u0275pipe(4,"titlecase"),e.\u0275\u0275elementEnd()()}if(2&o){const t=m.$implicit,n=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("background-color",n.getRemoteColor(t.name)),e.\u0275\u0275classProp("pulse",n.isHealthy(t.name)),e.\u0275\u0275property("title",n.getRemoteTooltip(t.name)),e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" Open ",e.\u0275\u0275pipeBind1(4,6,t.name)," ")}}let g=(()=>{class o{constructor(){this.remoteRegistryService=(0,e.inject)(r.RemoteRegistryService),this.remoteStatusService=(0,e.inject)(r.RemoteStatusService),this.router=(0,e.inject)(c.Router),this.remotes=[],this.statuses=[],this.activeRoute="",this.isLoading=!1}ngOnInit(){var t=this;return(0,d.A)(function*(){t.remotes=yield t.remoteRegistryService.getAllRegisteredRemotes(),t.remotes=t.remotes.filter(n=>n.name!==r.RemoteRegistryService.DEFAULT_LAYOUT),t.statuses=t.remoteStatusService.getStatuses(),t.router.events.subscribe(()=>{t.activeRoute=t.router.url.replace("/","")})})()}getRemoteColor(t){const n=this.statuses.find(i=>i.name===t);return n?"healthy"===n.status?"green":"red":"gray"}getRemoteTooltip(t){const n=this.statuses.find(i=>i.name===t);return n?n.metadata?`v${n.metadata.version} \u2022 ${n.metadata.uptimeSeconds}s uptime`:`${n.status}`:"Unknown"}navigateToRemote(t){var n=this;return(0,d.A)(function*(){try{n.isLoading=!0,yield n.remoteRegistryService.loadRemoteByName(t.name),n.isLoading=!1,n.router.navigateByUrl(`/${t.routePath}`)}catch{n.isLoading=!1,alert(`Failed to load remote: ${t.name}`)}})()}isHealthy(t){return"healthy"===this.statuses.find(i=>i.name===t)?.status}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-sidebar"]],decls:2,vars:1,consts:[[1,"sidebar"],["class","sidebar-button-wrapper",4,"ngFor","ngForOf"],[1,"sidebar-button-wrapper"],[1,"sidebar-button",3,"click"],[1,"health-indicator",3,"title"]],template:function(n,i){1&n&&(e.\u0275\u0275elementStart(0,"aside",0),e.\u0275\u0275template(1,u,5,8,"div",1),e.\u0275\u0275elementEnd()),2&n&&(e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",i.remotes))},dependencies:[l.CommonModule,l.NgForOf,l.TitleCasePipe],styles:[".sidebar[_ngcontent-%COMP%]{width:250px;background:#eee;padding:10px}.sidebar-button-wrapper[_ngcontent-%COMP%]{position:relative}.sidebar-button[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin-bottom:10px;padding:8px;font-size:16px;cursor:pointer;background-color:#007bff;color:#fff;border:none;border-radius:4px;text-align:left;transition:background-color .3s ease}.sidebar-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.health-indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;margin-right:8px;display:inline-block}.health-indicator.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-animation 1.5s infinite}@keyframes _ngcontent-%COMP%_pulse-animation{0%{transform:scale(1);opacity:1}50%{transform:scale(1.4);opacity:.7}to{transform:scale(1);opacity:1}}"]})}}return o})(),h=(()=>{class o{constructor(t){this.router=t}navigateHome(){this.router.navigateByUrl("/")}static{this.\u0275fac=function(n){return new(n||o)(e.\u0275\u0275directiveInject(c.Router))}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-top-bar"]],decls:6,vars:0,consts:[[1,"top-bar"],["tabindex","0","role","link","title","Navigate Home",1,"logo-link",3,"click","keydown.enter","keydown.space"],["src","/assets/yankees.png","alt","Logo",1,"logo"],["tabindex","0","role","link","title","Navigate Home",1,"title-link",3,"click","keydown.enter","keydown.space"]],template:function(n,i){1&n&&(e.\u0275\u0275elementStart(0,"header",0)(1,"a",1),e.\u0275\u0275listener("click",function(){return i.navigateHome()})("keydown.enter",function(){return i.navigateHome()})("keydown.space",function(){return i.navigateHome()}),e.\u0275\u0275element(2,"img",2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"a",3),e.\u0275\u0275listener("click",function(){return i.navigateHome()})("keydown.enter",function(){return i.navigateHome()})("keydown.space",function(){return i.navigateHome()}),e.\u0275\u0275elementStart(4,"h1"),e.\u0275\u0275text(5,"Rob's Layout"),e.\u0275\u0275elementEnd()()())},dependencies:[l.CommonModule],styles:[".top-bar[_ngcontent-%COMP%]{height:60px;background:#1976d2;color:#fff;display:flex;align-items:center;padding:0 20px}.logo[_ngcontent-%COMP%]{height:40px;margin-right:10px}.logo-link[_ngcontent-%COMP%], .title-link[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:flex;align-items:center;cursor:pointer}"]})}}return o})();function f(o,m){1&o&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275text(1," Loading dashboard modules... "),e.\u0275\u0275elementEnd())}function y(o,m){1&o&&e.\u0275\u0275element(0,"router-outlet")}const v=[{path:"",component:(()=>{class o{constructor(){this.isLoading=!0,this.statuses=[],this.router=(0,e.inject)(c.Router),this.remoteRegistryService=(0,e.inject)(r.RemoteRegistryService),this.remoteStatusService=(0,e.inject)(r.RemoteStatusService)}static{this.initialized=!1}ngOnInit(){var t=this;return(0,d.A)(function*(){if(o.initialized)t.isLoading=!1;else try{const n=yield t.remoteRegistryService.getAllRegisteredRemotes();yield t.updateHealthStatuses(n),setInterval(()=>t.updateHealthStatuses(n),1e4);const i=yield t.remoteRegistryService.initDefaultMfeRoutes(r.RemoteRegistryService.DEFAULT_LAYOUT,[r.RemoteRegistryService.DEFAULT_LAYOUT]);t.router.resetConfig([...t.router.config,{path:"",component:o,children:i}]),o.initialized=!0}catch(n){console.error("Failed to initialize dashboard:",n)}finally{t.isLoading=!1}})()}updateHealthStatuses(t){var n=this;return(0,d.A)(function*(){yield n.remoteStatusService.checkStatuses(t),n.statuses=n.remoteStatusService.getStatuses()})()}static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-dashboard"]],decls:6,vars:2,consts:[[1,"layout"],[1,"dashboard-main"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner"]],template:function(n,i){1&n&&(e.\u0275\u0275element(0,"app-top-bar"),e.\u0275\u0275elementStart(1,"div",0),e.\u0275\u0275element(2,"app-sidebar"),e.\u0275\u0275elementStart(3,"main",1),e.\u0275\u0275template(4,f,2,0,"div",2)(5,y,1,0,"router-outlet",3),e.\u0275\u0275elementEnd()()),2&n&&(e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",i.isLoading),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!i.isLoading))},dependencies:[c.RouterModule,c.RouterOutlet,h,g,l.CommonModule,l.NgIf],styles:[".dashboard-layout[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 60px)}.dashboard-main[_ngcontent-%COMP%]{flex-grow:1;padding:1rem;overflow-y:auto}.loading-spinner[_ngcontent-%COMP%]{text-align:center;padding:40px;font-size:18px;font-weight:700}section[_ngcontent-%COMP%]{margin-top:20px}li[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.health-dashboard[_ngcontent-%COMP%]{margin-bottom:2rem}section.health-dashboard[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;margin-bottom:1rem}"]})}}return o})()}]}}]);